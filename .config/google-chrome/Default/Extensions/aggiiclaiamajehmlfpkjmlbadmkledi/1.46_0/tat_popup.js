!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}({10:function(t,e){function n(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return o(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function o(t,e,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}let l=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=n(this,c(e).call(this));const r=document.querySelector("#transover-tat-popup-template").content.cloneNode(!0);t.attachShadow({mode:"open"}).appendChild(r);const i=()=>{window.postMessage({type:"transoverTranslate",text:t.q("#tat_input").value,tl:t.q("#tat_to_lang").value,sl:t.q("#tat_from_lang").value},"*")};return t.q("#swap_languages").onclick=(()=>{if(t.q("#swap_languages").classList.contains("disabled"))return;const e=t.q("#tat_to_lang"),n=t.q("#tat_from_lang"),r=e.value;e.value=n.value,n.value=r}),t.q("#tat_from_lang").onchange=(()=>{"auto"==t.q("#tat_from_lang").value?t.q("#swap_languages").classList.add("disabled"):t.q("#swap_languages").classList.remove("disabled")}),t.q("main").onkeydown=(t=>{13==t.keyCode&&i(),27!=t.keyCode&&t.stopPropagation()}),t.q("#disable_on_this_page").onchange=(t=>{window.postMessage({type:"toggle_disable_on_this_page",disable_on_this_page:t.target.checked},"*")}),t.q("#tat_close").onclick=(t=>{window.postMessage({type:"tat_close"}),t.preventDefault()}),t.q("#tat_submit").onclick=i,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a(HTMLElement)),i(e,null,[{key:"observedAttributes",get:function(){return["data-languages","data-disable_on_this_page"]}}]),i(e,[{key:"connectedCallback",value:function(){this.q("#tat_input").focus()}},{key:"attributeChangedCallback",value:function(t,e,n){if("data-languages"==t){const t=this.q("#tat_from_lang"),e=this.q("#tat_to_lang"),r=JSON.parse(n);let i=!0;for(const n in r){const a=new Option(r[n].label,n),o=new Option(r[n].label,n);r[n].selected_sl&&(i=!1,a.setAttribute("selected",!0)),r[n].selected_tl&&o.setAttribute("selected",!0),t.appendChild(a),e.appendChild(o)}const a=document.createElement("optgroup");a.label="----------",t.insertBefore(a,t.firstChild);const o=new Option("Autodetect","auto");t.insertBefore(o,t.firstChild),i&&(o.setAttribute("selected",!0),this.q("#swap_languages").classList.add("disabled"))}else"data-disable_on_this_page"===t&&(this.q("#disable_on_this_page").checked=JSON.parse(n))}},{key:"q",value:function(t){return this.shadowRoot.querySelector(t)}}]),e}();window.customElements.define("transover-type-and-translate-popup",l)}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbGliL3RhdF9wb3B1cC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlBvcHVwIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfZ2V0UHJvdG90eXBlT2YiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiYXR0YWNoU2hhZG93IiwiYXBwZW5kQ2hpbGQiLCJzZW5kVHJhbnNsYXRlIiwid2luZG93IiwicG9zdE1lc3NhZ2UiLCJ0eXBlIiwidGV4dCIsInEiLCJ0bCIsInNsIiwib25jbGljayIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidG9fc2VsZWN0IiwiZnJvbV9zZWxlY3QiLCJ0b192YWx1ZSIsIm9uY2hhbmdlIiwiYWRkIiwicmVtb3ZlIiwib25rZXlkb3duIiwiZSIsImtleUNvZGUiLCJzdG9wUHJvcGFnYXRpb24iLCJkaXNhYmxlX29uX3RoaXNfcGFnZSIsInRhcmdldCIsImNoZWNrZWQiLCJwcmV2ZW50RGVmYXVsdCIsIkhUTUxFbGVtZW50IiwiZm9jdXMiLCJhdHRyaWJ1dGUiLCJvbGRWYWwiLCJuZXdWYWwiLCJsYW5ndWFnZXMiLCJKU09OIiwicGFyc2UiLCJzZWxlY3RfYXV0byIsImZyb21fb3B0aW9uIiwiT3B0aW9uIiwibGFiZWwiLCJ0b19vcHRpb24iLCJzZWxlY3RlZF9zbCIsInNldEF0dHJpYnV0ZSIsInNlbGVjdGVkX3RsIiwic2VwYXJhdG9yIiwiY3JlYXRlRWxlbWVudCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJhdXRvX29wdGlvbiIsInNlbGVjdG9yIiwic2hhZG93Um9vdCIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFB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bkQsR0FBSzJELGNBQ2pCTCxHQUFjLEVBQ2RDLEVBQVlLLGFBQWEsWUFBWSxJQUVuQ1QsRUFBVW5ELEdBQUs2RCxhQUNqQkgsRUFBVUUsYUFBYSxZQUFZLEdBR3JDM0IsRUFBWWIsWUFBWW1DLEdBQ3hCdkIsRUFBVVosWUFBWXNDLEdBR3hCLE1BQU1JLEVBQVkvQyxTQUFTZ0QsY0FBYyxZQUN6Q0QsRUFBVUwsTUFBUSxhQUNsQnhCLEVBQVkrQixhQUFhRixFQUFXN0IsRUFBWWdDLFlBRWhELE1BQU1DLEVBQWMsSUFBSVYsT0FBTyxhQUFjLFFBQzdDdkIsRUFBWStCLGFBQWFFLEVBQWFqQyxFQUFZZ0MsWUFDOUNYLElBQ0ZZLEVBQVlOLGFBQWEsWUFBWSxHQUNyQ2hELEtBQUtjLEVBQUUsbUJBQW1CSSxVQUFVTSxJQUFJLGlCQUVuQiw4QkFBZFksSUFDVHBDLEtBQUtjLEVBQUUseUJBQXlCa0IsUUFBVVEsS0FBS0MsTUFBTUgsOEJBSXZEaUIsR0FDQSxPQUFPdkQsS0FBS3dELFdBQVdwRCxjQUFjbUQsWUFJekM3QyxPQUFPK0MsZUFBZUMsT0FBTyxxQ0FBc0M3RCIsImZpbGUiOiJ0YXRfcG9wdXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTApO1xuIiwiY2xhc3MgUG9wdXAgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbJ2RhdGEtbGFuZ3VhZ2VzJywgJ2RhdGEtZGlzYWJsZV9vbl90aGlzX3BhZ2UnXVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKVxuICAgIGNvbnN0IHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHJhbnNvdmVyLXRhdC1wb3B1cC10ZW1wbGF0ZScpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXG4gICAgdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pLmFwcGVuZENoaWxkKHQpXG5cbiAgICBjb25zdCBzZW5kVHJhbnNsYXRlID0gKCkgPT4ge1xuICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogJ3RyYW5zb3ZlclRyYW5zbGF0ZScsXG4gICAgICAgIHRleHQ6IHRoaXMucSgnI3RhdF9pbnB1dCcpLnZhbHVlLFxuICAgICAgICB0bDogdGhpcy5xKCcjdGF0X3RvX2xhbmcnKS52YWx1ZSxcbiAgICAgICAgc2w6IHRoaXMucSgnI3RhdF9mcm9tX2xhbmcnKS52YWx1ZVxuICAgICAgfSwgJyonKVxuICAgIH1cblxuICAgIHRoaXMucSgnI3N3YXBfbGFuZ3VhZ2VzJykub25jbGljayA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnEoJyNzd2FwX2xhbmd1YWdlcycpLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSlcbiAgICAgICAgcmV0dXJuXG5cbiAgICAgIGNvbnN0IHRvX3NlbGVjdCA9IHRoaXMucSgnI3RhdF90b19sYW5nJylcbiAgICAgIGNvbnN0IGZyb21fc2VsZWN0ID0gdGhpcy5xKCcjdGF0X2Zyb21fbGFuZycpXG4gICAgICBjb25zdCB0b192YWx1ZSA9IHRvX3NlbGVjdC52YWx1ZVxuXG4gICAgICB0b19zZWxlY3QudmFsdWUgPSBmcm9tX3NlbGVjdC52YWx1ZVxuICAgICAgZnJvbV9zZWxlY3QudmFsdWUgPSB0b192YWx1ZVxuICAgIH1cblxuICAgIHRoaXMucSgnI3RhdF9mcm9tX2xhbmcnKS5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnEoJyN0YXRfZnJvbV9sYW5nJykudmFsdWUgPT0gJ2F1dG8nKSB7XG4gICAgICAgIHRoaXMucSgnI3N3YXBfbGFuZ3VhZ2VzJykuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xKCcjc3dhcF9sYW5ndWFnZXMnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5xKCdtYWluJykub25rZXlkb3duID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgc2VuZFRyYW5zbGF0ZSgpXG4gICAgICB9XG4gICAgICAvLyBsZXQgJ2VzY2FwZScgYmUgaGFuZGxlZCBpbiB0aGUgaG9zdCBjb250ZXh0IChieSBjb250ZW50IHNjcmlwdClcbiAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgfVxuXG4gICAgdGhpcy5xKCcjZGlzYWJsZV9vbl90aGlzX3BhZ2UnKS5vbmNoYW5nZSA9IChlKSA9PiB7XG4gICAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoe1xuICAgICAgICB0eXBlOiAndG9nZ2xlX2Rpc2FibGVfb25fdGhpc19wYWdlJyxcbiAgICAgICAgZGlzYWJsZV9vbl90aGlzX3BhZ2U6IGUudGFyZ2V0LmNoZWNrZWRcbiAgICAgIH0sICcqJylcbiAgICB9XG5cbiAgICB0aGlzLnEoJyN0YXRfY2xvc2UnKS5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7dHlwZTogJ3RhdF9jbG9zZSd9KVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuXG4gICAgdGhpcy5xKCcjdGF0X3N1Ym1pdCcpLm9uY2xpY2sgPSBzZW5kVHJhbnNsYXRlXG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLnEoJyN0YXRfaW5wdXQnKS5mb2N1cygpXG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0cmlidXRlLCBvbGRWYWwsIG5ld1ZhbCkge1xuICAgIGlmIChhdHRyaWJ1dGUgPT0gJ2RhdGEtbGFuZ3VhZ2VzJykge1xuICAgICAgY29uc3QgZnJvbV9zZWxlY3QgPSB0aGlzLnEoJyN0YXRfZnJvbV9sYW5nJylcbiAgICAgIGNvbnN0IHRvX3NlbGVjdCA9IHRoaXMucSgnI3RhdF90b19sYW5nJylcbiAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IEpTT04ucGFyc2UobmV3VmFsKVxuICAgICAgbGV0IHNlbGVjdF9hdXRvID0gdHJ1ZVxuXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBsYW5ndWFnZXMpIHtcbiAgICAgICAgY29uc3QgZnJvbV9vcHRpb24gPSBuZXcgT3B0aW9uKGxhbmd1YWdlc1trZXldLmxhYmVsLCBrZXkpXG4gICAgICAgIGNvbnN0IHRvX29wdGlvbiA9IG5ldyBPcHRpb24obGFuZ3VhZ2VzW2tleV0ubGFiZWwsIGtleSlcblxuICAgICAgICBpZiAobGFuZ3VhZ2VzW2tleV0uc2VsZWN0ZWRfc2wpIHtcbiAgICAgICAgICBzZWxlY3RfYXV0byA9IGZhbHNlXG4gICAgICAgICAgZnJvbV9vcHRpb24uc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsIHRydWUpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhbmd1YWdlc1trZXldLnNlbGVjdGVkX3RsKSB7XG4gICAgICAgICAgdG9fb3B0aW9uLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCB0cnVlKVxuICAgICAgICB9XG5cbiAgICAgICAgZnJvbV9zZWxlY3QuYXBwZW5kQ2hpbGQoZnJvbV9vcHRpb24pXG4gICAgICAgIHRvX3NlbGVjdC5hcHBlbmRDaGlsZCh0b19vcHRpb24pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNlcGFyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGdyb3VwJylcbiAgICAgIHNlcGFyYXRvci5sYWJlbCA9ICctLS0tLS0tLS0tJ1xuICAgICAgZnJvbV9zZWxlY3QuaW5zZXJ0QmVmb3JlKHNlcGFyYXRvciwgZnJvbV9zZWxlY3QuZmlyc3RDaGlsZClcblxuICAgICAgY29uc3QgYXV0b19vcHRpb24gPSBuZXcgT3B0aW9uKCdBdXRvZGV0ZWN0JywgJ2F1dG8nKVxuICAgICAgZnJvbV9zZWxlY3QuaW5zZXJ0QmVmb3JlKGF1dG9fb3B0aW9uLCBmcm9tX3NlbGVjdC5maXJzdENoaWxkKVxuICAgICAgaWYgKHNlbGVjdF9hdXRvKSB7XG4gICAgICAgIGF1dG9fb3B0aW9uLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCB0cnVlKVxuICAgICAgICB0aGlzLnEoJyNzd2FwX2xhbmd1YWdlcycpLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gJ2RhdGEtZGlzYWJsZV9vbl90aGlzX3BhZ2UnKSB7XG4gICAgICB0aGlzLnEoJyNkaXNhYmxlX29uX3RoaXNfcGFnZScpLmNoZWNrZWQgPSBKU09OLnBhcnNlKG5ld1ZhbClcbiAgICB9XG4gIH1cblxuICBxKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICB9XG59XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3RyYW5zb3Zlci10eXBlLWFuZC10cmFuc2xhdGUtcG9wdXAnLCBQb3B1cClcbiJdLCJzb3VyY2VSb290IjoiIn0=